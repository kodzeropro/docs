# Схема данных

Схема определяет структуру коллекции: какие поля доступны, их типы и ограничения.

Схема является **строгой** — тип каждого поля фиксирован и проверяется при создании и обновлении записей. Если данные не соответствуют указанному типу или настройкам, запрос будет отклонён с ошибкой валидации.

Помимо типа, для каждого поля можно задать дополнительные правила и ограничения, описанные ниже.

## Управление схемой

1. Откройте коллекцию
2. Перейдите во вкладку **«Схема»**
3. Добавьте или измените поля
4. Нажмите **«Сохранить»**

## Автоматические поля

Каждая запись автоматически содержит системные поля:

| Поле | Описание |
|------|----------|
| `_id` | Уникальный идентификатор записи |
| `createdAt` | Дата и время создания |
| `updatedAt` | Дата и время последнего обновления |
| `user` | Пользователь-владелец записи (для `Доступность: User & Workspace`) |
| `workspace` | Пространство-владелец записи (для `Доступность: Workspace`)  |

::: info :pushpin: Изменение полей невозможны
Автоматические поля создаются и обновляются системой. Их нельзя изменить вручную.
:::

## Типы полей

### Текст

Строковое значение.

| Настройка | Описание |
|-----------|----------|
| Минимальная длина | Минимальное количество символов |
| Максимальная длина | Максимальное количество символов |
| Регулярное выражение | Паттерн для валидации значения |
| Может быть пустым | Допускается ли пустое значение |

### Число

Числовое значение (целое или дробное).

| Настройка | Описание |
|-----------|----------|
| Минимум | Минимальное значение |
| Максимум | Максимальное значение |
| Может быть 0 | Допускается ли нулевое значение |

### Да/Нет

Логическое значение: `true` или `false`.

| Настройка | Описание |
|-----------|----------|
| Допускается только `true` | Значение обязательно должно быть `true` |

### Дата и время

Дата и время в формате ISO 8601.

| Настройка | Описание |
|-----------|----------|
| Может быть пустым | Допускается ли пустое значение |

### Список

Выбор значения из заранее определённого набора.

| Настройка | Описание |
|-----------|----------|
| Допустимые значения | Список строк для выбора |
| Множественный выбор | Можно ли выбрать несколько значений |
| Может быть пустым | Допускается ли пустое значение |

### Связь

Ссылка на запись из другой коллекции.

| Настройка | Описание |
|-----------|----------|
| Коллекция | Выбор связанной коллекции |
| Может быть пустым | Допускается ли пустое значение |

### Email

Адрес электронной почты. Автоматически валидируется на соответствие формату email.

| Настройка | Описание |
|-----------|----------|
| Допустимые домены | Разрешённые почтовые домены |
| Кроме доменов | Запрещённые почтовые домены |
| Может быть пустым | Допускается ли пустое значение |

### URL

Ссылка на веб-ресурс. Автоматически валидируется на соответствие формату URL.

| Настройка | Описание |
|-----------|----------|
| Допустимые домены | Разрешённые домены |
| Кроме доменов | Запрещённые домены |
| Может быть пустым | Допускается ли пустое значение |

### JSON

Произвольная JSON-структура. Используется для кастомных данных, например, когда стандартные типы не подходят.

| Настройка | Описание |
|-----------|----------|
| Максимальный размер | Ограничение размера в байтах |
| Может быть пустым | Допускается ли пустое значение |

## Планируемые типы

Следующие типы полей находятся в разработке:

| Тип | Описание |
|-----|----------|
| **Контент** | Визуальный редактор контента (WYSIWYG) |
| **Файл** | Прикрепление файла к записи |
| **AI Текст** | Автоматическое заполнение с помощью ИИ по заданному промпту с использованием данных записи |

## Индексация и уникальность

Для большинства типов полей доступны дополнительные настройки индексов:

- **Индексировать это поле** — ускоряет фильтрацию, поиск и сортировку по этому полю.
- **Только уникальные значения** — значение поля не может повторяться (подходит для email, телефона, id заказа и т.п.).

> Индексация и уникальность **недоступны** для типов: Дата и время, Да/Нет, JSON, Список, Связь.